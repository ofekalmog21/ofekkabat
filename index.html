
<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>משחק ניהול סיכונים</title>
<style>
  body {
    margin: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(to bottom right, #1e3c58, #2e4f68, #42657b);
    color: white;
    text-align: center;
    min-height: 100vh;
    font-size: 4.5vw;
  }

  #game-container {
    max-width: 100%;
    margin: auto;
    padding: 5vw;
  }

  #start-screen {
    padding: 5vw;
    display: flex;
    flex-direction: column;
    align-items: center;
    background: rgba(0, 0, 0, 0.2);
    border-radius: 15px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    margin-top: 5vw;
  }

  #start-screen h1 {
    font-size: 10vw;
    margin-bottom: 10px;
    color: #ff6347;
    text-shadow: 0 0 20px rgba(255, 99, 71, 0.7);
    animation: pulse 1.5s ease-in-out infinite;
  }

  #start-screen h2 {
    font-size: 6vw;
    color: #d3d3d3;
    margin-bottom: 30px;
  }

  #start-screen img {
    width: 30vw;
    height: 30vw;
    margin-bottom: 30px;
    border-radius: 20px;
    box-shadow: 0 0 20px rgba(255, 99, 71, 0.5);
  }

  #registration-form {
    width: 100%;
    max-width: 100%;
    text-align: right;
    margin-bottom: 30px;
    background: rgba(0, 0, 0, 0.2);
    padding: 5vw;
    border-radius: 12px;
    box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
    font-size: 4.2vw;
  }

  .form-group {
    margin-bottom: 6vw;
    display: flex;
    flex-direction: column;
  }

  .form-group label {
    margin-bottom: 2vw;
    font-size: 4.5vw;
    font-weight: bold;
    color: #fff;
  }

  .form-group input, .form-group select {
    padding: 4vw;
    border-radius: 8px;
    border: 2px solid rgba(255, 255, 255, 0.2);
    background-color: rgba(255, 255, 255, 0.1);
    color: #fff;
    font-size: 4.5vw;
    transition: all 0.3s ease;
  }

  .form-group input:focus, .form-group select:focus {
    border-color: #ff6347;
    outline: none;
    box-shadow: 0 0 10px rgba(255, 99, 71, 0.5);
  }

  .form-group select option {
    background-color: #1e3c58;
    color: #fff;
  }

  #start-btn, #next-btn, #restart-btn {
    padding: 4vw;
    font-size: 4.5vw;
    background-color: #ff6347;
    color: #fff;
    border: none;
    border-radius: 30px;
    cursor: pointer;
    box-shadow: 0 0 20px rgba(255, 99, 71, 0.5);
    transition: 0.3s;
    font-weight: bold;
    margin-top: 5vw;
    width: 100%;
    max-width: 100%;
  }

  #start-btn:hover, #restart-btn:hover {
    background-color: #e53e3e;
    box-shadow: 0 0 30px rgba(229, 62, 62, 0.7);
    transform: translateY(-2px);
  }

  #start-btn:disabled {
    background-color: #888;
    cursor: not-allowed;
    box-shadow: none;
  }

  .question-container {
    background: rgba(0, 0, 0, 0.2);
    border-radius: 15px;
    padding: 6vw;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    margin-top: 20px;
    animation: fadeIn 0.5s ease-in-out;
  }

  .question {
    font-size: 5vw;
    margin-bottom: 25px;
    color: #fff;
    text-align: center;
    animation: fadeIn 1s ease-in-out;
    line-height: 1.5;
  }

  .question-number {
    font-weight: bold;
    color: #ff6347;
    margin-bottom: 15px;
    font-size: 4.5vw;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .progress-container {
    width: 100%;
    background-color: rgba(255, 255, 255, 0.2);
    border-radius: 10px;
    margin-bottom: 20px;
    overflow: hidden;
  }

  .progress-bar {
    height: 10px;
    background-color: #ff6347;
    width: 5%;
    border-radius: 10px;
    transition: width 0.5s ease-in-out;
  }

  .option {
    background: rgba(30, 60, 88, 0.8);
    color: #fff;
    margin: 12px 0;
    padding: 4vw;
    border-radius: 12px;
    cursor: pointer;
    border: 2px solid transparent;
    font-size: 4.5vw;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
    transition: all 0.3s ease;
    animation: slideIn 0.5s ease-in-out;
    position: relative;
    overflow: hidden;
    text-align: right;
  }

  .option:hover {
    background-color: rgba(0, 191, 255, 0.2);
    border-color: #00bfff;
    transform: translateY(-2px);
  }

  .option:active {
    transform: translateY(1px);
  }

  .option.correct {
    background-color: rgba(46, 204, 113, 0.3);
    border-color: #2ecc71;
  }

  .option.incorrect {
    background-color: rgba(231, 76, 60, 0.3);
    border-color: #e74c3c;
  }

  .explanation {
    margin-top: 25px;
    padding: 20px;
    border-radius: 12px;
    font-size: 4.3vw;
    background-color: rgba(0, 0, 0, 0.3);
    border-right: 4px solid #ff6347;
    animation: fadeIn 1s ease-in-out;
    text-align: right;
    line-height: 1.5;
  }

  #next-btn {
    margin-top: 25px;
    background-color: #00bfff;
    box-shadow: 0 0 15px rgba(0, 191, 255, 0.5);
    display: none;
  }

  #next-btn:hover {
    background-color: #009acd;
    box-shadow: 0 0 25px rgba(0, 154, 205, 0.7);
    transform: translateY(-2px);
  }

  #final-score {
    font-size: 4.5vw;
    margin-top: 30px;
    padding: 6vw;
    background-color: rgba(30, 60, 88, 0.7);
    border-radius: 15px;
    display: none;
    animation: fadeIn 1s ease-in-out;
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.4);
  }

  #score-message {
    font-size: 4.2vw;
    margin-top: 20px;
    color: #ffcc00;
    padding: 10px;
  }

  .player-info {
    margin-top: 20px;
    font-size: 4vw;
    color: #d3d3d3;
    text-align: center;
  }

  footer {
    margin-top: 40px;
    padding: 20px;
    font-size: 3.8vw;
    color: #d3d3d3;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
  }

  #warning-icon {
    font-size: 10vw;
    color: #ffcc00;
    animation: pulse 1.5s infinite;
    margin-bottom: 10px;
  }

  .field-error {
    color: #ff6347;
    font-size: 3.5vw;
    margin-top: 5px;
    display: none;
  }

  .correct-icon, .incorrect-icon {
    margin-left: 10px;
    font-size: 20px;
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .option.correct .correct-icon,
  .option.incorrect .incorrect-icon {
    opacity: 1;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(-20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  @keyframes slideIn {
    from { transform: translateX(-50px); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
  }

  @keyframes pulse {
    0% { transform: scale(1); opacity: 1; }
    50% { transform: scale(1.1); opacity: 0.8; }
    100% { transform: scale(1); opacity: 1; }
  }

  @keyframes correctAnswer {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
  }

  @keyframes incorrectAnswer {
    0%, 100% { transform: translateX(0); }
    20%, 60% { transform: translateX(-5px); }
    40%, 80% { transform: translateX(5px); }
  }

  /* מדיה קווארי למסכים רחבים */
  @media (min-width: 768px) {
    body {
      font-size: 18px;
    }

    .form-group label,
    .form-group input,
    .form-group select,
    .option,
    .explanation,
    .player-info,
    footer,
    #score-message,
    #final-score {
      font-size: 1em;
    }

    #start-btn, #next-btn, #restart-btn {
      font-size: 1.2em;
      padding: 1em;
      max-width: 300px;
    }

    .question {
      font-size: 1.3em;
    }

    .question-number {
      font-size: 1.1em;
    }

    #warning-icon {
      font-size: 50px;
    }

    .field-error {
      font-size: 14px;
    }
  }
</style>
</head>
<body>

<div id="game-container">
  <div id="start-screen">
    <div id="warning-icon">⚠️</div>
    <h1>ניהול סיכונים לניווטים</h1>
    <h2>משחק סימולציה אינטראקטיבי</h2>
    
    <div id="registration-form">
      <div class="form-group">
        <label for="full-name">שם מלא:</label>
        <input type="text" id="full-name" placeholder="הכנס שם מלא" required>
        <span class="field-error" id="name-error">יש להזין שם מלא</span>
      </div>
      
      <div class="form-group">
        <label for="platoon">פלוגה:</label>
        <select id="platoon" required>
          <option value="" disabled selected>בחר פלוגה</option>
          <option value="א">א</option>
          <option value="ב">ב</option>
          <option value="ג">ג</option>
          <option value="ד">ד</option>
        </select>
        <span class="field-error" id="platoon-error">יש לבחור פלוגה</span>
      </div>
      
      <div class="form-group">
        <label for="team">צוות:</label>
        <select id="team" required>
          <option value="" disabled selected>בחר צוות</option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
          <option value="6">6</option>
          <option value="7">7</option>
          <option value="8">8</option>
          <option value="9">9</option>
          <option value="10">10</option>
          <option value="11">11</option>
          <option value="12">12</option>
          <option value="13">13</option>
          <option value="14">14</option>
          <option value="15">15</option>
          <option value="16">16</option>
          <option value="17">17</option>
        </select>
        <span class="field-error" id="team-error">יש לבחור צוות</span>
      </div>
    </div>
    
    <button id="start-btn">התחל מבחן</button>
  </div>

  <div id="question-container" class="question-container" style="display:none;">
    <div class="progress-container">
      <div class="progress-bar" id="progress-bar"></div>
    </div>
    
    <div class="player-info" id="player-info"></div>
    <div class="question-number" id="question-number"></div>
    <div class="question" id="question-text"></div>
    <div id="options-container"></div>
    <div id="explanation" class="explanation" style="display:none;"></div>
  </div>
  
  <button id="next-btn">לשאלה הבאה</button>
  
  <div id="final-score"></div>

  <footer>
    פותח ע"י אופק אלמוג, הקב"ט הגדודי
  </footer>
</div>

<script>
  const scenarios = [
    {
      number: 1,
      question: "במהלך ניווט לילה, אחד החניכים לבוש בבגדים קצרים. מה תעשה?",
      options: [
        "אמשיך בניווט ואוודא שהוא לא מתעכב",
        "אפסיק את הניווט ואדאג לבגד מתאים",
        "אציע לו לרוץ כדי להתחמם",
      ],
      explanations: [
        "לא נכון. התעלמות מהמצב עלולה להוביל להיפותרמיה ואף סכנת חיים.",
        "נכון. פעולה מיידית למניעת החמרת מצב והבטחת בטיחות החניך.",
        "לא מספיק. ריצה אינה תחליף לביגוד מתאים בקור.",
      ],
      correctIndex: 1
    },
    {
      number: 2,
      question: "חניך מתלונן על כאבי ראש חזקים וסחרחורת. מה תעשה?",
      options: [
        "אדאג שינוח מעט וימשיך",
        "אדווח מיד לקב\"ט ואזמין חובש",
        "אבקש ממנו לשתות ולהמשיך",
      ],
      explanations: [
        "לא נכון. יש חשש להתייבשות או מכת חום.",
        "נכון. זו תגובה מקצועית שמונעת סיכון.",
        "לא מספק. מים לא פותרים בעיה רפואית חריפה.",
      ],
      correctIndex: 1
    },
    {
      number: 3,
      question: "איבדת קשר עם אחד החניכים בניווט. מה תעשה?",
      options: [
        "אמתין מעט, אולי יחזור לבד",
        "אפעיל נוהל חיפוש מיידי",
        "אודיע למפקד בסוף הניווט",
      ],
      explanations: [
        "לא נכון. כל דקה קריטית במקרה של נעדר.",
        "נכון. נוהל חיפוש נועד בדיוק למצבים כאלה.",
        "לא מספיק. צריך לפעול מיידית, לא לאחר מעשה.",
      ],
      correctIndex: 1
    },
    {
      number: 4,
      question: "חניך שובר את המצפן באמצע הניווט. מה תעשה?",
      options: [
        "אעזור לו להמשיך עם קבוצת ניווט אחרת",
        "אשלח אותו אחורה לבד",
        "אתעלם מזה כי הוא יודע את השטח",
      ],
      explanations: [
        "נכון. ניווט ללא מצפן מסוכן.",
        "לא נכון. הליכה לבד מסוכנת",
        "לא נכון. ידע בשטח לא מחליף אמצעים נדרשים.",
      ],
      correctIndex: 0
    },
    {
      number: 5,
      question: "החניך מגיע לנקודת ביקורת עם סימני עייפות קשים. מה עושים?",
      options: [
        "מניח לו לנוח מעט וממשיך",
        "מזמין סיוע רפואי ומדווח",
        "מבקש מהמפקד לדרבן אותו להמשיך",
      ],
      explanations: [
        "לא מספיק. מצב פיזי ירוד מצריך בדיקה רפואית.",
        "נכון. זה תפקוד נכון וזהיר.",
        "לא נכון. דרבון עלול להחמיר מצב רפואי.",
      ],
      correctIndex: 1
    },
    {
      number: 6,
      question: "במהלך ניווט יום חם, החניך לא שתה מים כלל. מה עושים?",
      options: [
        "נותן לו לשתות ולנוח במקום מוצל",
        "שולח אותו אחורה",
        "ממשיך כרגיל",
      ],
      explanations: [
        "נכון. שתייה והפסקה הם קריטיים למניעת התייבשות.",
        "לא מספיק. הוא זקוק להשגחה רפואית ולא שילך לבד.",
        "לא נכון. המשך בלי שתייה עלול להוביל למכת חום.",
      ],
      correctIndex: 0
    },
    {
      number: 7,
      question: "חניך מועד ונחבל ברגל. מה הפעולה הנכונה?",
      options: [
        "בודק תפקוד, מדווח ומזמין סיוע",
        "נותן לו לנוח וממשיך לאחר מכן",
        "מבקש שיחבוש לבד וימשיך",
      ],
      explanations: [
        "נכון. פציעה מחייבת טיפול ובדיקה.",
        "לא מספיק. מנוחה ללא אבחנה מסכנת.",
        "לא נכון. טיפול עצמי אינו פתרון בשטח.",
      ],
      correctIndex: 0
    },
    {
      number: 8,
      question: "החניך ללא מים באמצע המסלול. מה תעשה?",
      options: [
        "נותן לו מים משלי ודואג לדווח",
        "ממשיך כי המסלול כמעט נגמר",
        "מבקש שיקח מים מאחרים",
      ],
      explanations: [
        "נכון. אספקת מים מיידית קריטית.",
        "לא נכון. אפילו סיום קרוב מסוכן במצב כזה.",
        "לא מספיק. לא מבטיח זמינות מים מיידית.",
      ],
      correctIndex: 0
    },
    {
      number: 9,
      question: "חניך מתבלבל בשטח ואינו יודע מיקומו. מה הפעולה הנכונה?",
      options: [
        "שולח לו נ.צ. ומכווין אותו מהנקודה",
        "אומר לו להסתכל במפה טוב ולהבין לבד",
        "מחכה שיחזור לבד לנקודת ההתחלה",
      ],
      explanations: [
        "נכון. הכוונה ממוקדת מונעת תעייה בשטח.",
        "לא נכון. בלבול יכול להחריף ולסכן.",
        "לא נכון. המתנה פאסיבית אינה פתרון.",
      ],
      correctIndex: 0
    },
    {
      number: 10,
      question: "חניך שוכח את ציוד הסימון. מה עושים?",
      options: [
        "מחייב אותו להמשיך בלי לסמן",
        "מספק לו ציוד חלופי ומדווח",
        "אומר לו לרשום את הנקודות על דף",
      ],
      explanations: [
        "לא נכון. סימון הוא תנאי הכרחי לבטיחות ומשימה.",
        "נכון. ציוד חלופי שומר על איכות המשימה.",
        "לא מספק. דף אינו תחליף לציוד ניווט תקני.",
      ],
      correctIndex: 1
    },
    {
      number: 11,
      question: "החניך מתעלף לשניות וחוזר לעצמו. מה תעשה?",
      options: [
        "עוצר הכל, מזמין סיוע רפואי",
        "מבקש שינוח וימשיך",
        "נותן לו לשתות ואוכל קל",
      ],
      explanations: [
        "נכון. כל איבוד הכרה מצריך בדיקה רפואית מיידית.",
        "לא נכון. התעלפות מצביעה על בעיה חמורה.",
        "לא מספיק. לא מטפל בבעיה עצמה.",
      ],
      correctIndex: 0
    },
    {
      number: 12,
      question: "חניך פולט כדור במהלך הפסקת מים. מה תעשה?",
      options: [
        "מפעיל נוהל פליטת כדור, מדווח ומפסיק את הפעילות",
        "מנזף בו וממשיך",
        "מבקש שיספר למפקד אחר כך",
      ],
      explanations: [
        "נכון. פליטת כדור היא אירוע בטיחותי חמור.",
        "לא נכון. נזיפה בלבד לא מספקת.",
        "לא נכון. דיווח מיידי הכרחי.",
      ],
      correctIndex: 0
    },
    {
      number: 13,
      question: "בחניון הסיום, אחד החניכים לא חזר בזמן. מה תעשה?",
      options: [
        "אפעיל מיד נוהל היעדרות",
        "אחכה עוד 15 דק׳",
        "אבדוק עם חברים שלו איפה הוא",
      ],
      explanations: [
        "נכון. כל איחור מסוכן ודורש תגובה מיידית.",
        "לא נכון. כל דקה חשובה באירוע נעדר.",
        "לא מספק. אין תחליף לנוהל מסודר.",
      ],
      correctIndex: 0
    },
    {
      number: 14,
      question: "חניך משתולל ולא מקשיב להוראות בטיחות. מה עושים?",
      options: [
        "עוצר את פעילותו, מדווח, ומרחיק אותו",
        "משאיר אותו בשטח רק עם השגחה",
        "מזהיר אותו בעל פה וממשיך",
      ],
      explanations: [
        "נכון. הפרת משמעת מסכנת חיים בשטח.",
        "לא נכון. נוכחותו ממשיכה לסכן.",
        "לא מספיק. אזהרה אינה מספיקה.",
      ],
      correctIndex: 0
    },
    {
      number: 15,
      question: "מזג האוויר השתנה ונהיה ערפילי במיוחד. מה עושים?",
      options: [
        "עוצרים את הניווט עד להתבהרות",
        "ממשיכים בזהירות רבה",
        "מתקרבים למסלולים סלולים",
      ],
      explanations: [
        "נכון. תנאי ראות קשים מצריכים עצירה.",
        "לא נכון. זה עדיין מסוכן.",
        "לא מספק. לא תמיד יש דרך סלולה קרובה.",
      ],
      correctIndex: 0
    },
    {
      number: 16,
      question: "בחניך נמצא סכין אישית ללא אישור. מה עושים?",
      options: [
        "מחרים את הסכין ומדווח",
        "מתעלם כי לא השתמש בה",
        "שואל למה הביא אותה",
      ],
      explanations: [
        "נכון. מדובר באירוע בטיחותי.",
        "לא נכון. עצם ההחזקת הסכין לא תקינה.",
        "לא מספיק. אין תחליף לדיווח רשמי.",
      ],
      correctIndex: 0
    },
    {
      number: 17,
      question: "באמצע הניווט אחד החניכים מתחיל לפרוץ בבכי. מה תעשה?",
      options: [
        "עוצר, משוחח איתו ומדווח למפקדים",
        "מתעלם כי הוא יירגע",
        "מבקש מהקבוצה להרגיע אותו",
      ],
      explanations: [
        "נכון. התערבות רגשית חשובה למניעת התדרדרות.",
        "לא נכון. התעלמות מסכנת אותו.",
        "לא מספק. צריך גורם אחראי ומנוסה.",
      ],
      correctIndex: 0
    },
    {
      number: 18,
      question: "חניך עוקף את המסלול כדי לחסוך זמן. מה תעשה?",
      options: [
        "מדווח למפקדים על חריגה ומרחיק אותו מהניווט",
        "מזהיר אותו בעל פה",
        "מתעלם כי חזר בזמן",
      ],
      explanations: [
        "נכון. עבירה חמורה על נוהלי בטיחות.",
        "לא מספיק. נדרשת תגובה מערכתית.",
        "לא נכון. אי אפשר להתעלם מחריגות מסוכנות.",
      ],
      correctIndex: 0
    },
    {
      number: 19,
      question: "ציוד תקשורת הפסיק לפעול. מה תעשה?",
      options: [
        "עוצר את הניווט עד לתיקון או קבלת תחליף",
        "ממשיך לפי לו״ז ומדווח בסיום",
        "מנסה להעביר מסר דרך קבוצה אחרת",
      ],
      explanations: [
        "נכון. ללא קשר – אין יכולת פיקוח.",
        "לא נכון. כל פעילות חייבת קשר פעיל.",
        "לא מספיק. מסר עקיף לא מבטיח תוצאה.",
      ],
      correctIndex: 0
    },
    {
      number: 20,
      question: "חניך עם חום קל מבקש להשתתף בכל זאת. מה עושים?",
      options: [
        "אוסר עליו לצאת ודורש אישור רפואי",
        "מאפשר לו להשתתף עם השגחה",
        "נותן לו מים וממשיך",
      ],
      explanations: [
        "נכון. לא מסכנים חניך עם סימנים למחלה.",
        "לא נכון. אפילו השגחה לא מספיקה במקרה רפואי.",
        "לא מספק. מים אינם פותרים מצב רפואי.",
      ],
      correctIndex: 0
    }
  ];

  let currentQuestion = 0;
  let score = 0;

  // אתחול אירוע הלחיצה על כפתור ההתחלה
  document.getElementById("start-btn").addEventListener("click", startGame);

  function startGame() {
    console.log("המשחק מתחיל!"); // לוג לדיבוג
    document.getElementById("start-screen").style.display = "none";
    document.getElementById("question-container").style.display = "block";
    loadQuestion();
  }

  function shuffle(array) {
    const newArray = [...array]; // יצירת עותק כדי לא לשנות את המערך המקורי
    for (let i = newArray.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
    }
    return newArray;
  }

  function loadQuestion() {
    console.log("טוען שאלה מספר", currentQuestion + 1); // לוג לדיבוג
    
    const questionObj = scenarios[currentQuestion];
    const indexes = [0, 1, 2];
    const shuffledIndexes = shuffle(indexes);
    
    let optionsHTML = '';
    for (let i = 0; i < shuffledIndexes.length; i++) {
      const originalIndex = shuffledIndexes[i];
      optionsHTML += `<button class="option" data-index="${originalIndex}">${questionObj.options[originalIndex]}</button>`;
    }

    // מאתחל את מיכל השאלה
    const questionContainer = document.getElementById("question-container");
    questionContainer.innerHTML = `
      <div class="question-number">תרחיש ${questionObj.number} מתוך 20</div>
      <div class="question">${questionObj.question}</div>
      ${optionsHTML}
      <div id="explanation" class="explanation" style="display:none;"></div>
    `;

    // הסרת כל המאזינים הקודמים והוספת חדשים
    document.querySelectorAll(".option").forEach(btn => {
      btn.addEventListener("click", handleOptionClick);
    });

    // אתחול כפתור הבא
    const nextBtn = document.getElementById("next-btn");
    nextBtn.style.display = "none";
    nextBtn.onclick = handleNextClick;
  }

  function handleOptionClick() {
    const selected = parseInt(this.getAttribute("data-index"));
    const questionObj = scenarios[currentQuestion];

    // מבטל את האפשרות ללחוץ על אפשרויות נוספות
    document.querySelectorAll(".option").forEach(option => {
      option.style.backgroundColor = "#1e3c58";
      option.removeEventListener("click", handleOptionClick);
    });

    // מסמן את האפשרות שנבחרה
    this.style.backgroundColor = "#FFA500";

    // מציג את ההסבר
    const explanation = document.getElementById("explanation");
    explanation.style.display = "block";
    explanation.textContent = questionObj.explanations[selected];
    
    // בדיקה אם התשובה נכונה ומתן 5 נקודות אם כן
    if (selected === questionObj.correctIndex) {
      score += 5;
      console.log("תשובה נכונה! ניקוד כרגע:", score); // לוג לדיבוג
    } else {
      console.log("תשובה שגויה. ניקוד נשאר:", score); // לוג לדיבוג
    }

    // מציג את כפתור המעבר לשאלה הבאה
    document.getElementById("next-btn").style.display = "inline-block";
  }

  function handleNextClick() {
    currentQuestion++;
    
    if (currentQuestion < scenarios.length) {
      loadQuestion();
      this.style.display = "none";
    } else {
      // סיום המשחק - הצגת הציון הסופי
      document.getElementById("question-container").style.display = "none";
      this.style.display = "none";
      
      const finalScoreDiv = document.getElementById("final-score");
      finalScoreDiv.style.display = "block";
      
      let scoreMessage = "";
      if (score >= 80) {
        scoreMessage = "עברת כל הכבוד! אתה מנווט בטוח";
      } else {
        scoreMessage = "עוד מאמץ קטן ואתה שם";
      }
      
      finalScoreDiv.innerHTML = `
        <h2>סיימת את המשחק!</h2>
        <div>הציון הסופי שלך: ${score} מתוך 100</div>
        <div id="score-message">${scoreMessage}</div>
      `;
      
      console.log("המשחק הסתיים! ציון סופי:", score); // לוג לדיבוג
// שליחה ל-Google Sheets
fetch("https://script.google.com/macros/s/AKfycbyFBjqcV2H2NhaEHiWiHRqEMYCVSl-T8zZLptS-UpbXfpXzzhz6lb8aJKZW7tCAqbDB/exec", {
  method: "POST",
  headers: {
    "Content-Type": "application/json"
  },
  body: JSON.stringify({
    fullName: document.getElementById("full-name").value,
    platoon: document.getElementById("platoon").value,
    team: document.getElementById("team").value,
    score: score
  })
})
.then(response => console.log("המידע נשלח לגיליון"))
.catch(error => console.error("שגיאה בשליחה:", error));

    }
  }
</script>

</body>
</html>
